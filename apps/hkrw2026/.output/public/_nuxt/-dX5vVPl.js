import{u as oe,E as ne,a as ie,b as re,c as se,d as de,e as ue}from"./uiu0czDc.js";import{d as W,a4 as U,h as b,i as S,Z as F,a3 as G,y as g,z as E,Q as X,A as c,R as l,W as w,B as T,a2 as ce,aa as pe,o as te,l as ae,a1 as C,C as f,D as x,O as R,P as I,a5 as z,ab as Z,t as ve,U as ge,a6 as me,a7 as fe}from"./C3W5oS2G.js";import"./B_Z75if2.js";import{c as be,a as ye,i as _e,u as he,b as xe,d as Ee,s as ke}from"./DJdWfvJB.js";import{_ as le}from"./DlAUqK2U.js";import{a as De}from"./CVtoa8yg.js";import"./BueMy08n.js";import"./Dnj8X3EN.js";function Q(e){return typeof e=="boolean"}function J(e){return typeof e=="number"}function ee(e){return typeof e=="object"&&e!==null}const He=W({props:{visible:[Object,Boolean],name:String,mask:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},type:{type:String,default:""},modalClass:{type:String,default:"modal-vue3-wrap"},width:{type:[String,Number],default:500},offsetTop:{type:[String,Number],default:100},zIndex:{type:[String,Number],default:1e3},title:{type:String,default:"Title"},animation:{type:Boolean,default:!0},closable:{type:Boolean,default:!0},draggable:{type:[Boolean,Object],default:!1},cancelButton:{type:Object,default:()=>({text:"cancel",onclick:null,loading:!1})},okButton:{type:Object,default:()=>({text:"ok",onclick:null,loading:!1})}},setup(e,{slots:k,emit:h}){let u;const p=e.name,A=typeof e.width=="string"?e.width:`${e.width}px`,O=typeof e.offsetTop=="string"?e.offsetTop:`${e.offsetTop}px`,K=S(null),D=S(null);let M=null,$=null,d=F({init:-15,value:-15,max:0,step:1,speed:10,linear:!1}),r=F({init:0,value:0,max:360,step:30,speed:30,linear:!0});const B=(o,n,t)=>{let a=n?o.max:o.init,i=n?o.init:o.max;if(n?o.value<=i:o.value>=i)return o.linear?o.value=a:(o.value=i,t&&t()),!1;setTimeout(()=>{n?o.value-=o.step:o.value+=o.step},o.speed)},N=o=>{o&&u.list.length>0&&ee(e.visible)?u.trigger(o,!1):h("update:visible",!1)},q=o=>{!e.maskClosable||!e.mask||o.target===K.value&&N(p)};let y=F({value:!1,target:""});const Y=(o,n)=>{const t=o[n];(!t.loading||t.loading&&!y.value)&&(t.onclick&&typeof t.onclick=="function"?t.onclick():N(o.name),t.loading&&(y.value=!0,y.target=n))},_=S(),H=F({left:void 0,top:void 0}),L=o=>{o.preventDefault(),o.stopPropagation()},P=o=>{let n=D.value.offsetLeft,t=D.value.offsetTop,a={width:D.value.offsetWidth,height:D.value.offsetHeight,clientWidth:document.documentElement.clientWidth,clientHeight:document.documentElement.clientHeight,x:o.pageX-n,y:o.pageY-t};_.value=a,L(o);const i=v=>{if(!_.value)return;let V=v.pageX,j=v.pageY;H.left=Math.min(Math.max(V-_.value.x,0),_.value.clientWidth-_.value.width),H.top=Math.min(Math.max(j-_.value.y,0),_.value.clientHeight-_.value.height),L(v)},m=v=>{!_.value||(_.value=void 0,L(v),document.removeEventListener("pointermove",i),document.removeEventListener("pointerup",m))};document.addEventListener("pointermove",i),document.addEventListener("pointerup",m)};return U(()=>e.draggable,o=>{ee(o)&&o.addEventListener("pointerdown",P)}),()=>{if(k.default){let o;return Q(e.visible)?o=e.visible:(o=e.visible.currVisible[p],u=e.visible.dep),o?(y.value&&B(r),e.animation===!1?d.value=d.max:(M!=p&&(M=p,d.value=d.init),d.speed=5,B(d)),d.value>=d.max&&!_.value&&$!=p&&($=p,h("onVisible"))):($==p||!p)&&(e.animation===!1?o=!1:(o=!0,d.speed=2,B(d,!0,()=>{o=!1,$=null,y.value=!1,h("onUnVisible")}))),o?b("div",{class:e.modalClass},[e.mask?b("div",{class:"modal-vue3-mask",style:`width:100%;height:100%;position:fixed;left:0;top:0;background-color:rgba(0, 0, 0, 0.25);z-index:${e.zIndex-1};`}):null,b("div",{ref:K,style:`position:fixed;left:0;right:0;top:0;bottom:0;margin: 0 auto;z-index:${e.zIndex};overflow:auto;outline:0;`,onclick:n=>{q(n)}},[b("div",{ref:D,class:"modal-vue3-content",style:`width:${A};position:relative;top:${J(H.top)?H.top+"px":O};left:${H.left?H.left+"px":""};margin: ${J(H.left)?"0":"0 auto"}; ${e.type!="clean"?"border:1px solid #f0f0f0;":""}overflow:auto;outline:0;box-sizing:border-box; ${e.type!="clean"?"background-color:#fff;":""}border-radius:2px;transform:translateY(${d.value}px);`},[e.type!="clean"?b("div",{class:"modal-vue3-header",style:`padding:12px 22px;border-bottom:1px solid #f0f0f0;position:relative;${e.draggable&&Q(e.draggable)?"cursor:move;":""}`,onpointerdown:e.draggable&&Q(e.draggable)?P:null},[b("div",null,e.title),e.closable?b("div",{style:"width:20px;height:16px;cursor:pointer;position:absolute;top:15px;right:15px;font-size: 20px;",onclick:()=>{N(p)}},[b("div",{style:"width:14px;height:1px;position:absolute;left:0;right:0;top:0;bottom:0;margin:auto;background-color:#999;transform:rotate(45deg);"},""),b("div",{style:"width:14px;height:1px;position:absolute;left:0;right:0;top:0;bottom:0;margin:auto;background-color:#999;transform:rotate(-45deg);"},"")]):null]):null,b("div",{class:"modal-vue3-body",style:e.type!="clean"?"padding: 14px 22px":""},k.default()),e.type!="clean"?b("div",{class:"modal-vue3-footer",style:"padding: 12px 22px;display:flex;justify-content:flex-end;align-items:center;border-top:1px solid #f0f0f0;"},[b("div",{class:"modal-vue3-footer-cancel",style:`margin-right: 20px;height:30px;padding:0 8px;border-radius:2px;border: 1px solid #d9d9d9;display:flex;justify-content:center;align-items:center;cursor:pointer;position:relative;${y.value&&y.target==="cancelButton"?"opacity:.6;":""}`,onclick:()=>{Y(e,"cancelButton")}},[y.value&&y.target==="cancelButton"?b("span",{style:`width: 10px;height:10px;margin-right:5px;border:1px solid #666;border-radius:50%;border-top:1px solid transparent; transform:rotate(${r.value}deg);`}):null,b("div",{style:"min-width:44px;text-align:center;"},e.cancelButton.text||"cancel")]),b("div",{class:"modal-vue3-footer-ok",style:`height:30px;padding: 0 8px;border-radius:2px;display:flex;justify-content:center;align-items:center;background-color:#4395ff;color:#fff;cursor:pointer;position:relative;${y.value&&y.target==="okButton"?"opacity:.6;":""}`,onclick:()=>{Y(e,"okButton")}},[y.value&&y.target==="okButton"?b("span",{style:`width: 10px;height:10px;margin-right:5px;border:1px solid #fff;border-radius:50%;border-top:1px solid transparent; transform:rotate(${r.value}deg);`}):null,b("div",{style:"min-width:44px;text-align:center;"},e.okButton.text||"ok")])]):null])])]):null}}}}),Ce={class:"programItem"},Ne={key:0,class:"eventContent"},we=["innerHTML"],Te={key:1,class:"eventContent"},Me={class:"label"},Se=["innerHTML"],$e={key:2,class:"eventContent"},Le={class:"label"},Ke=["innerHTML"],Be={key:3,class:"eventContent"},Ye={class:"label"},Ve=["innerHTML"],Re={key:4,class:"eventContent"},Ae={class:"label"},Pe=["innerHTML"],je={key:5,class:"eventContent"},Fe={class:"label"},Ie=["innerHTML"],ze={key:6,class:"eventContent"},Ue={class:"label"},Oe=["innerHTML"],qe=W({__name:"programItem",props:{program:{}},setup(e){const k=e,{t:h,tObj:u}=G({...k.program,tableDateEN:"Programme Date/Time",tableLocationEN:"Venue",tableRegisterEN:"Registration / Enquiry",tablePeriodEN:"Registration Period",tableDateHK:"活動日期及時間",tableLocationHK:"地點",tableRegisterHK:"報名及查詢",tablePeriodHK:"報名日期",tableHostEN:"Host",tableTargetEN:"Target",tableQuotaEN:"Quota",tableHostHK:"講者/主持",tableTargetHK:"對象",tableQuotaHK:"名額",addToCalendarHK:"加入行事曆",addToCalendarEN:"Add to calendar"});return(p,A)=>(g(),E("div",Ce,[X(p.$slots,"header",{},void 0,!0),e.program.name_EN?(g(),E("div",Ne,[c("div",{class:"content mainColor",innerHTML:l(u)("name_",e.program)},null,8,we)])):w("",!0),e.program.displayTime_EN?(g(),E("div",Te,[c("div",Me,T(l(h)("tableDate")),1),c("div",{class:"content mainColor",innerHTML:l(u)("displayTime_",e.program)},null,8,Se)])):w("",!0),e.program.location_EN?(g(),E("div",$e,[c("div",Le,T(l(h)("tableLocation")),1),c("div",{class:"content mainColor",innerHTML:l(u)("location_",e.program)},null,8,Ke)])):w("",!0),e.program.target_EN?(g(),E("div",Be,[c("div",Ye,T(l(h)("tableTarget")),1),c("div",{class:"content",innerHTML:l(u)("target_",e.program)},null,8,Ve)])):w("",!0),e.program.quota_EN?(g(),E("div",Re,[c("div",Ae,T(l(h)("tableQuota")),1),c("div",{class:"content",innerHTML:l(u)("quota_",e.program)},null,8,Pe)])):w("",!0),e.program.register_EN?(g(),E("div",je,[c("div",Fe,T(l(h)("tableRegister")),1),c("div",{class:"content",innerHTML:l(u)("register_",e.program)},null,8,Ie)])):w("",!0),e.program.period_EN?(g(),E("div",ze,[c("div",Ue,T(l(h)("tablePeriod")),1),c("div",{class:"content",innerHTML:l(u)("period_",e.program)},null,8,Oe)])):w("",!0),X(p.$slots,"footer",{},void 0,!0)]))}}),Qe=le(qe,[["__scopeId","data-v-a34c16a7"]]),We=()=>{const{find:e}=ce(),k=pe("categories",()=>[]),{tObj:h}=G({});te(async()=>{const{data:p}=await e("categories",{populate:"*",filters:{showInHome:{$eq:!0}},sort:"order"});k.value=p,console.log("categories",k.value)});const u=ae(()=>k.value.filter(p=>!p.externalURL).map(p=>({name:h("name_",p),value:p.id})));return{categories:k,searchCategory:u}},Ge={class:"pageContainer innerGrid"},Xe={class:"content"},Ze={class:"filterContainer"},Je={class:"content"},et={class:"eventsContainer"},tt=["onClick"],at={class:"sx__month-agenda-event__time sx__month-agenda-event__has-icon"},lt={class:"modalContent"},ot=W({__name:"search",setup(e){const k=be(),h=ye();C.extend(_e);let u=S(!1);const{allDistrict:p,bigDistrict:A}=oe(),{searchCategory:O}=We(),{allEvents:K}=he(),D=S(),{tObj:M,currentLang:$,t:d}=G({tableDateEN:"Programme Date/Time",tableLocationEN:"Venue",tableRegisterEN:"Registration / Enquiry",tablePeriodEN:"Registration Period",tableNameHK:"活動名稱",tableNameEN:"Event Name",tableDateHK:"活動日期及時間",tableLocationHK:"地點",tableRegisterHK:"報名及查詢",tablePeriodHK:"報名日期",tableHostEN:"Host",tableTargetEN:"Target",tableQuotaEN:"Quota",tableHostHK:"講者/主持",tableTargetHK:"對象",tableQuotaHK:"名額",addToCalendarHK:"加入行事曆",addToCalendarEN:"Add to calendar",detailHK:"詳情",detailEN:"Detail",closeHK:"關閉",closeEN:"Close",keywordHK:"關鍵字",keywordEN:"Keyword",categoryHK:"類別",categoryEN:"Category",dateRangeHK:"日期區間",dateRangeEN:"Date Range",districtHK:"地區",districtEN:"District",detailDistrictHK:"分區",detailDistrictEN:"Detail District",allHK:"全部",allEN:"All",fulleDayHK:"全天",fulleDayEN:"Full Day"}),r=S({keyword:"",category:"",daterange:[],district:"",detailDistrict:""}),B=ae(()=>!r.value.district||r.value.district==="All"?p.value:p.value.filter(n=>n.event.main_district===r.value.district));let N=xe({views:[Ee()],locale:"en-US",isDark:!1,minDate:"2025-04-01",maxDate:"2025-05-31",selectedDate:C("2025-05-31").format("YYYY-MM-DD"),plugins:[h,k],events:[],callbacks:{onRender:n=>{const t=n.calendarState.range.value;L(t)},onRangeUpdate:n=>{L(n)},onEventClick(n){D.value=n,u.value=!0},onSelectedDateUpdate:n=>{Y()}}});function q(n){D.value=n,u.value=!0}const y=S([]);function Y(){const n=k.getDate(),t=_.value.filter(a=>{if(a.isFullDay){const i=C(a.start,"YYYY-MM-DD"),m=C(a.end,"YYYY-MM-DD"),v=C(n,"YYYY-MM-DD");return v.isBetween(i,m,"day")||v.isSame(i,"day")||v.isSame(m,"day")}else{const i=C(n,"YYYY-MM-DD"),m=C(a.start,"YYYY-MM-DD"),v=C(a.end,"YYYY-MM-DD");return i.isBetween(m,v,"day")||i.isSame(m,"day")||i.isSame(v,"day")}}).sort((a,i)=>a.isFullDay&&!i.isFullDay?1:!a.isFullDay&&i.isFullDay?-1:a.isFullDay&&i.isFullDay?a.start.localeCompare(i.start):a.start===i.start?a.title.localeCompare(i.title):a.start.localeCompare(i.start));y.value=t}const _=S([]);function H(){const n=[];for(const t of K.value){if(r.value.keyword){let a=(t.content_EN||"")+(t.content_HK||"")+(t.host_EN||"")+(t.host_HK||"")+(t.target_EN||"")+(t.target_HK||"")+(t.quota_EN||"")+(t.quota_HK||"")+(t.title_EN||"")+(t.title_HK||"");if(a=a.toLowerCase(),!a.includes(r.value.keyword.toLowerCase()))continue}if(!(r.value.category&&!t.categories.data.find(i=>i.id===r.value.category)&&r.value.category!=="All"))for(const a of t.programs){if(r.value.daterange.length>0&&(!a.startDate||!a.endDate||C(r.value.daterange[0]).isAfter(a.startDate)||C(r.value.daterange[1]).isBefore(a.endDate))||r.value.district&&(!a.district||!a.district.data||a.district.data.main_district!==r.value.district&&r.value.district!=="All")||r.value.detailDistrict&&(!a.district||!a.district.data||a.district.data.id!==r.value.detailDistrict&&r.value.detailDistrict!=="All"))continue;const i={id:t.id+a.id,title:M("title_",t),url:`/event/${t.documentId}`,location:M("location_",a),start:a.startDate+(a.startTime?" "+a.startTime.substring(0,5):""),end:a.endDate+(a.endTime?" "+a.endTime.substring(0,5):""),isFullDay:!a.startTime,data:{event:t,program:a}};n.push(i)}}_.value=n.sort((t,a)=>t.start===a.start?t.title.localeCompare(a.title):t.start.localeCompare(a.start)),N.events.set(_.value),Y()}function L(n){const t=document.querySelector(".sx__range-heading");if(!(!t||$.value==="EN")&&n){const a=C(n.start);let i=a.get("year"),m=a.get("month");m!==1&&(m=m+1,a.get("month")===11&&(i+=1)),t.innerHTML=`${i}年 ${m+1}月`}}function P(n,t){const a=n.split(" ");if(a.length===1)return d("fulleDay");{const i=t.split(" ");return a[1]+" - "+i[1]}}U($,n=>{const t=n==="HK"?"zh-TW":n==="CN"?"zh-CN":"en-US";if(k.setLocale(t),n!=="EN"&&N.$app.calendarState.range.value){const a=N.$app.calendarState.range.value;fe(()=>{L(a)})}N.$app.calendarState.range.value&&H()},{immediate:!0}),U(r,()=>{H()},{deep:!0}),U(K,()=>{H()},{immediate:!0,deep:!0});const o=ve();return De({title:o.public.siteName+" | Schedule"}),te(()=>{}),(n,t)=>{const a=se,i=re,m=ie,v=ue,V=de,j=ne;return g(),E("div",Ge,[t[6]||(t[6]=c("div",{class:"title gradientText"},null,-1)),c("div",Xe,[c("div",Ze,[f(j,{gutter:12},{default:x(()=>[f(m,{span:12},{default:x(()=>[f(i,{label:l(d)("keyword")},{default:x(()=>[f(a,{modelValue:l(r).keyword,"onUpdate:modelValue":t[0]||(t[0]=s=>l(r).keyword=s),placeholder:l(d)("keyword")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),f(m,{span:12},{default:x(()=>[f(i,{label:l(d)("category")},{default:x(()=>[f(V,{modelValue:l(r).category,"onUpdate:modelValue":t[1]||(t[1]=s=>l(r).category=s),clearable:"",placeholder:l(d)("category")},{default:x(()=>[f(v,{value:"All",label:l(d)("all")},null,8,["label"]),(g(!0),E(I,null,z(l(O),s=>(g(),R(v,{key:s.value,label:s.name,value:s.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1}),f(j,{gutter:12},{default:x(()=>[f(m,{span:12},{default:x(()=>[f(i,{label:l(d)("district")},{default:x(()=>[f(V,{modelValue:l(r).district,"onUpdate:modelValue":t[2]||(t[2]=s=>l(r).district=s),clearable:""},{default:x(()=>[f(v,{value:"All",label:l(d)("all")},null,8,["label"]),(g(!0),E(I,null,z(l(A),s=>(g(),R(v,{key:s.value,value:s.value,label:l(M)("label_",s)},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1}),f(m,{span:12},{default:x(()=>[f(i,{label:l(d)("detailDistrict")},{default:x(()=>[f(V,{modelValue:l(r).detailDistrict,"onUpdate:modelValue":t[3]||(t[3]=s=>l(r).detailDistrict=s),clearable:""},{default:x(()=>[f(v,{value:"All",label:l(d)("all")},null,8,["label"]),(g(!0),E(I,null,z(l(B),s=>(g(),R(v,{key:s.id,label:l(M)("label_",s),value:s.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})])]),c("div",Je,[l(N)?(g(),R(l(ke),{key:0,"calendar-app":l(N)},null,8,["calendar-app"])):w("",!0),c("div",et,[(g(!0),E(I,null,z(l(y),s=>(g(),E("div",{key:s.id,class:"sx__event sx__month-agenda-event",onClick:nt=>q(s)},[c("div",{class:ge({"sx__month-agenda-event__title":!0,isFullDay:s.isFullDay})},T(s.title),3),c("div",at,[t[5]||(t[5]=me('<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="sx__event-icon" data-v-959387b0><g id="SVGRepo_bgCarrier" stroke-width="0" data-v-959387b0></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-v-959387b0></g><g id="SVGRepo_iconCarrier" data-v-959387b0><path d="M12 8V12L15 15" stroke="var(--sx-color-on-primary-container)" stroke-width="2" stroke-linecap="round" data-v-959387b0></path><circle cx="12" cy="12" r="9" stroke="var(--sx-color-on-primary-container)" stroke-width="2" data-v-959387b0></circle></g></svg>',1)),c("div",null,T(P(s.start,s.end)),1)])],8,tt))),128))])]),l(D)?(g(),R(l(He),{key:0,visible:l(u),"onUpdate:visible":t[4]||(t[4]=s=>Z(u)?u.value=s:u=s),title:"",cancelButton:{text:l(d)("close"),onClick:()=>Z(u)?u.value=!1:u=!1},okButton:{text:l(d)("detail"),onclick:()=>n.$router.push(l(D).url)}},{default:x(()=>[c("div",lt,[c("h3",null,T(l(M)("title_",l(D).data.event)),1),f(Qe,{program:l(D).data.program},null,8,["program"])])]),_:1},8,["visible","cancelButton","okButton"])):w("",!0)])}}}),gt=le(ot,[["__scopeId","data-v-959387b0"]]);export{gt as default};
